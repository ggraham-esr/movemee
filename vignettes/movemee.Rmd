---
title: "movemee"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{movemee}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(movemee)
```

# Using `movemee` to move files to and from Sharepoint

This package was developed to give the ESR Epi team an easy way to use `rclone` in an R script. It consists of a main function `move_file()` and some convenience functions `sharepoint_directions()` and `local_directions()` that help structure directories correctly. Finally there is a separate function called `show_me_files()` that can be used to look into sharepoint for contents of folders. 

To use this package you will need to have configured your rclone remotes. Start by opening a new terminal (alt + shift + R). Type in `module load rclone` and hit return. Then follow Russell Smithies' [Walkthrough](). Your induction document will have the relevant names and site urls for your sharepoint sites.

## move_file()

```
move_file(
  file = sharepoint_directions('mySite','Project Folder','Input Data','My Data.csv'),
  destination = local_directions('input_data')
)

```

This is the most straightforward way to use it. You specify a file, and a destination. rclone will move the file listed, and will print out progress along the way. You can move something from sharepoint and to sharepoint, just so long as you've got your sharepoint_directions in the right place.

## sharepoint_directions()

```{r}

sharepoint_directions('mySite','Project Folder','Input Data','My Data.csv')

```
This just makes sure the directions are passed in a form that rclone understands. The first argument is always the name of your remote. 

This function supports splicing (!!!) so you can pass vectors too (but you must always specify the remote!):

```{r}

sp_data_location <- c('Project Folder','Input Data')

sharepoint_directions('mySite',!!!sp_data_location)

```

## local_directions()

This is similar to sharepoint directions. It's actually pretty much here::here, but I've wrapped it up to do two things:
1. allow splicing in of a vector
2. pass strings with spaces in them safely to rclone

```{r}

local_data <- c('My data','input','extracts')

local_directions(!!!local_data)
```
